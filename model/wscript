#!/usr/bin/python3

from waflib.Context import Context
from glob import glob
from pathlib import Path
import os

instruments = ['CentralPanel', 'SignalBoard']


def configure(ctx):
    pass


def build(ctx):
    sources = glob("./build/../model/*.py")
    abs = []
    for s in sources:
        abs.append(Path(s).relative_to(Path("./build")).as_posix())
    for i in instruments:
        ctx(rule=f"blender -b -P ../model/generate.py -- {i}",
            source=abs, target=f"../{i}.blend")
